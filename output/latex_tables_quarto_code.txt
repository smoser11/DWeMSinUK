```{r}
#| label: tbl-subgroup-prevalence
#| tbl-cap: "Prevalence of labour exploitation among domestic workers by nationality subgroup. Estimates based on RDS-SS methodology with neighborhood bootstrap confidence intervals."
#| echo: false
#| warning: false

library(knitr)
library(kableExtra)
library(here)

# Load the results data
load(here("output", "rds_subgroup_analysis_results_FIXED.RData"))

# Create and display main table
latex_table1 <- create_latex_table1(cluster_summary)
latex_table1
```

```{r}
#| label: tbl-detailed-subgroup-prevalence
#| tbl-cap: "Detailed prevalence estimates by subgroup and exploitation indicator. All estimates use RDS-SS methodology with bootstrap confidence intervals."
#| echo: false
#| warning: false

# Create and display detailed table
detailed_latex_table <- create_detailed_latex_table(rds_subgroup_results$summary_df)
detailed_latex_table
```




 Second, the NSUM - RDS comparison is striking.  The
  estimates are an order of magnitude different!  I think the next step is
  to utilize different RDS weighting scheemes in the NSUM esimtaion.  To
  that end, please carefully review the data-processing scripts that use
  functions such as `gile.ss.weights()`, `hv.weights()`, etc.  Please also
  review Boot_step2.R which calculates different weights 'manually.'  The
  goal in this step is to calculate different RDS weights that are suitable
  for use as 'inclusion probabilities' (the $\pi_i$ in Feehan and Slaganik
  2016)  in NSUM estimation (Basic, Modified, GNSUM, etc.).
  
  